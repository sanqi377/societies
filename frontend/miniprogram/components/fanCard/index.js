"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
Component({
    properties: {
        info: {
            type: Array
        }
    },
    data: {},
    methods: {
        goInfo: function (e) {
            wx.navigateTo({
                url: "/pages/societies/info/index?id=" + e.currentTarget.dataset.id
            });
        },
        subscribe: function (e) {
            var _this = this;
            var index = e.currentTarget.dataset.index;
            var data = {
                subscribe: app.globalData.uid,
                be_subscribe: e.currentTarget.dataset.be_subscribe,
                update_time: Date.parse(new Date()) / 1000
            };
            app.globalData.subscribe(data).then(function () {
                _this.data.info[index].fans = true;
                _this.setData({
                    info: _this.data.info
                });
            });
        },
        cancelSubscribe: function (e) {
            var _this = this;
            var index = e.currentTarget.dataset.index;
            var data = {
                subscribe: app.globalData.uid,
                be_subscribe: e.currentTarget.dataset.be_subscribe,
            };
            app.globalData.unSubscribe({
                data: data,
                success: function () {
                    _this.data.info[index].fans = false;
                    _this.setData({
                        info: _this.data.info
                    });
                }
            });
        }
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLElBQU0sR0FBRyxHQUFHLE1BQU0sRUFBRSxDQUFBO0FBQ3BCLFNBQVMsQ0FBQztJQUlSLFVBQVUsRUFBRTtRQUNWLElBQUksRUFBRTtZQUNKLElBQUksRUFBRSxLQUFLO1NBQ1o7S0FDRjtJQUtELElBQUksRUFBRSxFQUVMO0lBS0QsT0FBTyxFQUFFO1FBQ1AsTUFBTSxFQUFOLFVBQU8sQ0FBTTtZQUNYLEVBQUUsQ0FBQyxVQUFVLENBQUM7Z0JBQ1osR0FBRyxFQUFFLGlDQUFpQyxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEVBQUU7YUFDcEUsQ0FBQyxDQUFBO1FBQ0osQ0FBQztRQUtELFNBQVMsRUFBVCxVQUFVLENBQU07WUFBaEIsaUJBYUM7WUFaQyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUE7WUFDekMsSUFBSSxJQUFJLEdBQUc7Z0JBQ1QsU0FBUyxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRztnQkFDN0IsWUFBWSxFQUFFLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLFlBQVk7Z0JBQ2xELFdBQVcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFFLElBQUksSUFBSSxFQUFVLENBQUMsR0FBRyxJQUFJO2FBQ3BELENBQUE7WUFDRCxHQUFHLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUM7Z0JBQ2xDLEtBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUE7Z0JBQ2pDLEtBQUksQ0FBQyxPQUFPLENBQUM7b0JBQ1gsSUFBSSxFQUFFLEtBQUksQ0FBQyxJQUFJLENBQUMsSUFBSTtpQkFDckIsQ0FBQyxDQUFBO1lBQ0osQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDO1FBS0QsZUFBZSxFQUFmLFVBQWdCLENBQU07WUFBdEIsaUJBdUNDO1lBdENDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQTtZQUN6QyxJQUFJLElBQUksR0FBRztnQkFDVCxTQUFTLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxHQUFHO2dCQUM3QixZQUFZLEVBQUUsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsWUFBWTthQUNuRCxDQUFBO1lBQ0QsR0FBRyxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUM7Z0JBQ3pCLElBQUksTUFBQTtnQkFBRSxPQUFPLEVBQUU7b0JBQ2IsS0FBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQTtvQkFDbEMsS0FBSSxDQUFDLE9BQU8sQ0FBQzt3QkFDWCxJQUFJLEVBQUUsS0FBSSxDQUFDLElBQUksQ0FBQyxJQUFJO3FCQUNyQixDQUFDLENBQUE7Z0JBQ0osQ0FBQzthQUNGLENBQUMsQ0FBQTtRQTBCSixDQUFDO0tBQ0Y7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyB9XG5jb25zdCBhcHAgPSBnZXRBcHAoKVxuQ29tcG9uZW50KHtcbiAgLyoqXG4gICAqIOe7hOS7tueahOWxnuaAp+WIl+ihqFxuICAgKi9cbiAgcHJvcGVydGllczoge1xuICAgIGluZm86IHtcbiAgICAgIHR5cGU6IEFycmF5XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiDnu4Tku7bnmoTliJ3lp4vmlbDmja5cbiAgICovXG4gIGRhdGE6IHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDnu4Tku7bnmoTmlrnms5XliJfooahcbiAgICovXG4gIG1ldGhvZHM6IHtcbiAgICBnb0luZm8oZTogYW55KSB7XG4gICAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgICAgdXJsOiBcIi9wYWdlcy9zb2NpZXRpZXMvaW5mby9pbmRleD9pZD1cIiArIGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmlkXG4gICAgICB9KVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog5YWz5rOoXG4gICAgICogQHBhcmFtIGUgXG4gICAgICovXG4gICAgc3Vic2NyaWJlKGU6IGFueSkge1xuICAgICAgbGV0IGluZGV4ID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5kZXhcbiAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICBzdWJzY3JpYmU6IGFwcC5nbG9iYWxEYXRhLnVpZCxcbiAgICAgICAgYmVfc3Vic2NyaWJlOiBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5iZV9zdWJzY3JpYmUsXG4gICAgICAgIHVwZGF0ZV90aW1lOiBEYXRlLnBhcnNlKChuZXcgRGF0ZSgpIGFzIGFueSkpIC8gMTAwMFxuICAgICAgfVxuICAgICAgYXBwLmdsb2JhbERhdGEuc3Vic2NyaWJlKGRhdGEpLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLmRhdGEuaW5mb1tpbmRleF0uZmFucyA9IHRydWVcbiAgICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgICBpbmZvOiB0aGlzLmRhdGEuaW5mb1xuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOWPlua2iOWFs+azqFxuICAgICAqIEBwYXJhbSBlIFxuICAgICAqL1xuICAgIGNhbmNlbFN1YnNjcmliZShlOiBhbnkpIHtcbiAgICAgIGxldCBpbmRleCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmluZGV4XG4gICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgc3Vic2NyaWJlOiBhcHAuZ2xvYmFsRGF0YS51aWQsXG4gICAgICAgIGJlX3N1YnNjcmliZTogZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYmVfc3Vic2NyaWJlLFxuICAgICAgfVxuICAgICAgYXBwLmdsb2JhbERhdGEudW5TdWJzY3JpYmUoe1xuICAgICAgICBkYXRhLCBzdWNjZXNzOiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5kYXRhLmluZm9baW5kZXhdLmZhbnMgPSBmYWxzZVxuICAgICAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgICAgICBpbmZvOiB0aGlzLmRhdGEuaW5mb1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAvLyAkRGlhbG9nKHtcbiAgICAgIC8vICAgdGl0bGU6ICfmuKnppqjmj5DnpLonLFxuICAgICAgLy8gICBtZXNzYWdlOiAn5L2g56Gu5a6a6KaB5Y+W5raI5YWz5rOo5ZCX77yfJyxcbiAgICAgIC8vICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZVxuICAgICAgLy8gfSkudGhlbigoKSA9PiB7XG4gICAgICAvLyAgIGFqYXgoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9pbmRleC91c2VyL2NhbmNlbFN1YnNjcmliZScsIGRhdGEpLnRoZW4oKHJlczogYW55KSA9PiB7XG4gICAgICAvLyAgICAgaWYgKHJlcy5kYXRhLnJldCA9PT0gMjAwKSB7XG4gICAgICAvLyAgICAgICAkTm90aWZ5KHtcbiAgICAgIC8vICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgLy8gICAgICAgICBjb250ZW50OiByZXMuZGF0YS5tc2dcbiAgICAgIC8vICAgICAgIH0pXG4gICAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAgIC8vICAgICAgICROb3RpZnkoe1xuICAgICAgLy8gICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgLy8gICAgICAgICBjb250ZW50OiByZXMuZGF0YS5tc2dcbiAgICAgIC8vICAgICAgIH0pXG4gICAgICAvLyAgICAgfVxuICAgICAgLy8gICAgIHRoaXMuZGF0YS5pbmZvW2luZGV4XS5mYW5zID0gZmFsc2VcbiAgICAgIC8vICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgLy8gICAgICAgaW5mbzogdGhpcy5kYXRhLmluZm9cbiAgICAgIC8vICAgICB9KVxuICAgICAgLy8gICB9KVxuICAgICAgLy8gfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgLy8gICBjb25zb2xlLmxvZyhcIueCueWHu+WPlua2iOaMiemSruWbnuiwg1wiKVxuICAgICAgLy8gfSlcbiAgICB9XG4gIH1cbn0pXG4iXX0=